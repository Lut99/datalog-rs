<svg class="railroad" viewBox="0 0 1414 546" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
<style type="text/css">
svg.railroad {
background-color: hsl(30, 20%, 95%);
background-size: 15px 15px;
background-image: linear-gradient(to right, rgba(30, 30, 30, .05) 1px, transparent 1px),
		  linear-gradient(to bottom, rgba(30, 30, 30, .05) 1px, transparent 1px);
}

svg.railroad rect.railroad_canvas {
stroke-width: 0px;
fill: none;
}

svg.railroad path {
stroke-width: 3px;
stroke: black;
fill: none;
}

svg.railroad .debug {
stroke-width: 1px;
stroke: red;
}

svg.railroad text {
font: 14px monospace;
text-anchor: middle;
}

svg.railroad .nonterminal text {
font-weight: bold;
}

svg.railroad text.comment {
font: italic 12px monospace;
}

svg.railroad rect {
stroke-width: 3px;
stroke: black;
fill:hsl(-290, 70%, 90%);
}

svg.railroad g.labeledbox &gt; rect {
stroke-width: 1px;
stroke: grey;
stroke-dasharray: 5px;
fill:rgba(90, 90, 150, .1);
}
</style>
<rect class="railroad_canvas" height="100%" width="100%"/>
<g class="verticalgrid">
<g class="sequence">
<text class="comment" x="29" y="123">
Spec</text>
<path d=" M 58 108 v 20 m 10 -20 v 20 m -10 -10 h 20"/>
<g class="sequence">
<g class="repeat">
<path d=" M 88 118 h 12 m 1262 0 h 12 m -12 0 a 12 12 0 0 1 12 12 v 394 m 0 -194 l -5 -5 m 10 0 l -5 5 m 0 194 a 12 12 0 0 1 -12 12 m 0 0 h -1262 m 634 0 l 5 -5 m 0 10 l -5 -5 m -634 0 a 12 12 0 0 1 -12 -12 v -394 m 0 200 l -5 5 m 10 0 l -5 -5 m 0 -200 a 12 12 0 0 1 12 -12"/>
<g/>
<g class="sequence">
<g class="repeat">
<path d=" M 100 118 h 12 m 477 0 h 12 m -12 0 a 12 12 0 0 1 12 12 v 124 m 0 -59 l -5 -5 m 10 0 l -5 5 m 0 59 a 12 12 0 0 1 -12 12 m -28 0 h -449 m 227 0 l 5 -5 m 0 10 l -5 -5 m -227 0 a 12 12 0 0 1 -12 -12 v -124 m 0 65 l -5 5 m 10 0 l -5 -5 m 0 -65 a 12 12 0 0 1 12 -12"/>
<g class="terminal">
<rect height="22" rx="10" ry="10" width="28" x="561" y="255"/>
<text x="575" y="271">
,</text>
</g>
<g class="choice">
<path d=" M 112 118 h 24 m 429 0 h 24"/>
<g class="labeledbox">
<rect height="111" width="429" x="136" y="58"/>
<path d=" M 136 118 h 8 m 413 0 h 8"/>
<text class="comment" x="184" y="81">
Atom::Fact</text>
<g class="sequence">
<g class="sequence">
<text class="comment" x="166" y="123">
regex</text>
<g class="terminal">
<rect height="22" rx="10" ry="10" width="148" x="199" y="107"/>
<text x="273" y="123">
^[a-z_][a-z_-]*$</text>
</g>
<path d=" M 189 118 h 10"/>
</g>
<g class="optional">
<path d=" M 357 118 h 24 m -24 0 a 12 12 0 0 0 12 -12 v 0 a 12 12 0 0 1 12 -12 h 152 m -73 0 l -5 -5 m 0 10 l 5 -5 m 73 0 a 12 12 0 0 1 12 12 v 0 a 12 12 0 0 0 12 12 h -24"/>
<g class="sequence">
<g class="terminal">
<rect height="22" rx="10" ry="10" width="28" x="381" y="107"/>
<text x="395" y="123">
(</text>
</g>
<g class="repeat">
<path d=" M 419 118 h 12 m 52 0 h 12 m -12 0 a 12 12 0 0 1 12 12 v 8 a 12 12 0 0 1 -12 12 m -28 0 h -24 a 12 12 0 0 1 -12 -12 v -8 a 12 12 0 0 1 12 -12"/>
<g class="terminal">
<rect height="22" rx="10" ry="10" width="28" x="455" y="139"/>
<text x="469" y="155">
,</text>
</g>
<g class="nonterminal">
<rect height="22" width="52" x="431" y="107"/>
<text x="457" y="123">
Fact</text>
</g>
</g>
<g class="terminal">
<rect height="22" rx="10" ry="10" width="28" x="505" y="107"/>
<text x="519" y="123">
)</text>
</g>
<path d=" M 409 118 h 10"/>
<path d=" M 495 118 h 10"/>
</g>
</g>
<path d=" M 347 118 h 10"/>
</g>
</g>
<path d=" M 112 118 a 12 12 0 0 1 12 12 v 49 m 453 0 v -49 a 12 12 0 0 1 12 -12"/>
<path d=" M 124 179 v 35 a 12 12 0 0 0 12 12 m 235 0 h 194 m -94 0 l -5 -5 m 0 10 l 5 -5 m 94 0 a 12 12 0 0 0 12 -12 v -35"/>
<g class="labeledbox">
<rect height="66" width="235" x="136" y="179"/>
<path d=" M 136 226 h 8 m 219 0 h 8"/>
<text class="comment" x="180" y="202">
Atom::Var</text>
<g class="sequence">
<text class="comment" x="166" y="231">
regex</text>
<g class="terminal">
<rect height="22" rx="10" ry="10" width="164" x="199" y="215"/>
<text x="281" y="231">
^[A-Z][a-zA-Z_-]*$</text>
</g>
<path d=" M 189 226 h 10"/>
</g>
</g>
</g>
</g>
<g class="optional">
<path d=" M 611 118 h 24 m -24 0 a 12 12 0 0 0 12 -12 v -84 m 0 45 l -5 5 m 10 0 l -5 -5 m 0 -45 a 12 12 0 0 1 12 -12 h 665 m -329 0 l -5 -5 m 0 10 l 5 -5 m 329 0 a 12 12 0 0 1 12 12 v 84 m 0 -39 l -5 -5 m 10 0 l -5 5 m 0 39 a 12 12 0 0 0 12 12 h -24"/>
<g class="sequence">
<g class="terminal">
<rect height="22" rx="10" ry="10" width="36" x="635" y="107"/>
<text x="653" y="123">
:-</text>
</g>
<g class="repeat">
<path d=" M 681 118 h 12 m 595 0 h 12 m -12 0 a 12 12 0 0 1 12 12 v 373 m 0 -183 l -5 -5 m 10 0 l -5 5 m 0 183 a 12 12 0 0 1 -12 12 m -28 0 h -567 m 286 0 l 5 -5 m 0 10 l -5 -5 m -286 0 a 12 12 0 0 1 -12 -12 v -373 m 0 189 l -5 5 m 10 0 l -5 -5 m 0 -189 a 12 12 0 0 1 12 -12"/>
<g class="terminal">
<rect height="22" rx="10" ry="10" width="28" x="1260" y="504"/>
<text x="1274" y="520">
,</text>
</g>
<g class="choice">
<path d=" M 693 118 h 24 m 493 0 h 78 m -36 0 l -5 -5 m 0 10 l 5 -5 m 36 0"/>
<g class="labeledbox">
<rect height="231" width="493" x="717" y="22"/>
<path d=" M 717 118 h 8 m 477 0 h 8"/>
<text class="comment" x="775" y="45">
Literal::Atom</text>
<g class="sequence">
<g class="choice">
<path d=" M 725 118 h 24 m 429 0 h 24"/>
<g class="labeledbox">
<rect height="111" width="429" x="749" y="58"/>
<path d=" M 749 118 h 8 m 413 0 h 8"/>
<text class="comment" x="797" y="81">
Atom::Fact</text>
<g class="sequence">
<g class="sequence">
<text class="comment" x="779" y="123">
regex</text>
<g class="terminal">
<rect height="22" rx="10" ry="10" width="148" x="812" y="107"/>
<text x="886" y="123">
^[a-z_][a-z_-]*$</text>
</g>
<path d=" M 802 118 h 10"/>
</g>
<g class="optional">
<path d=" M 970 118 h 24 m -24 0 a 12 12 0 0 0 12 -12 v 0 a 12 12 0 0 1 12 -12 h 152 m -73 0 l -5 -5 m 0 10 l 5 -5 m 73 0 a 12 12 0 0 1 12 12 v 0 a 12 12 0 0 0 12 12 h -24"/>
<g class="sequence">
<g class="terminal">
<rect height="22" rx="10" ry="10" width="28" x="994" y="107"/>
<text x="1008" y="123">
(</text>
</g>
<g class="repeat">
<path d=" M 1032 118 h 12 m 52 0 h 12 m -12 0 a 12 12 0 0 1 12 12 v 8 a 12 12 0 0 1 -12 12 m -28 0 h -24 a 12 12 0 0 1 -12 -12 v -8 a 12 12 0 0 1 12 -12"/>
<g class="terminal">
<rect height="22" rx="10" ry="10" width="28" x="1068" y="139"/>
<text x="1082" y="155">
,</text>
</g>
<g class="nonterminal">
<rect height="22" width="52" x="1044" y="107"/>
<text x="1070" y="123">
Fact</text>
</g>
</g>
<g class="terminal">
<rect height="22" rx="10" ry="10" width="28" x="1118" y="107"/>
<text x="1132" y="123">
)</text>
</g>
<path d=" M 1022 118 h 10"/>
<path d=" M 1108 118 h 10"/>
</g>
</g>
<path d=" M 960 118 h 10"/>
</g>
</g>
<path d=" M 725 118 a 12 12 0 0 1 12 12 v 49 m 453 0 v -49 a 12 12 0 0 1 12 -12"/>
<path d=" M 737 179 v 35 a 12 12 0 0 0 12 12 m 235 0 h 194 m -94 0 l -5 -5 m 0 10 l 5 -5 m 94 0 a 12 12 0 0 0 12 -12 v -35"/>
<g class="labeledbox">
<rect height="66" width="235" x="749" y="179"/>
<path d=" M 749 226 h 8 m 219 0 h 8"/>
<text class="comment" x="793" y="202">
Atom::Var</text>
<g class="sequence">
<text class="comment" x="779" y="231">
regex</text>
<g class="terminal">
<rect height="22" rx="10" ry="10" width="164" x="812" y="215"/>
<text x="894" y="231">
^[A-Z][a-zA-Z_-]*$</text>
</g>
<path d=" M 802 226 h 10"/>
</g>
</g>
</g>
</g>
</g>
<path d=" M 693 118 a 12 12 0 0 1 12 12 v 133 m 0 -63 l -5 -5 m 10 0 l -5 5 m 0 63 m 571 0 v -133 m 0 69 l -5 5 m 10 0 l -5 -5 m 0 -69 a 12 12 0 0 1 12 -12"/>
<path d=" M 705 263 v 84 m 0 -39 l -5 -5 m 10 0 l -5 5 m 0 39 a 12 12 0 0 0 12 12 m 547 0 h 0 a 12 12 0 0 0 12 -12 v -84 m 0 45 l -5 5 m 10 0 l -5 -5 m 0 -45"/>
<g class="labeledbox">
<rect height="231" width="547" x="717" y="263"/>
<path d=" M 717 359 h 8 m 531 0 h 8"/>
<text class="comment" x="786" y="286">
Literal::NegAtom</text>
<g class="sequence">
<g class="sequence">
<g class="terminal">
<rect height="22" rx="10" ry="10" width="44" x="725" y="348"/>
<text x="747" y="364">
not</text>
</g>
<g class="choice">
<path d=" M 779 359 h 24 m 429 0 h 24"/>
<g class="labeledbox">
<rect height="111" width="429" x="803" y="299"/>
<path d=" M 803 359 h 8 m 413 0 h 8"/>
<text class="comment" x="851" y="322">
Atom::Fact</text>
<g class="sequence">
<g class="sequence">
<text class="comment" x="833" y="364">
regex</text>
<g class="terminal">
<rect height="22" rx="10" ry="10" width="148" x="866" y="348"/>
<text x="940" y="364">
^[a-z_][a-z_-]*$</text>
</g>
<path d=" M 856 359 h 10"/>
</g>
<g class="optional">
<path d=" M 1024 359 h 24 m -24 0 a 12 12 0 0 0 12 -12 v 0 a 12 12 0 0 1 12 -12 h 152 m -73 0 l -5 -5 m 0 10 l 5 -5 m 73 0 a 12 12 0 0 1 12 12 v 0 a 12 12 0 0 0 12 12 h -24"/>
<g class="sequence">
<g class="terminal">
<rect height="22" rx="10" ry="10" width="28" x="1048" y="348"/>
<text x="1062" y="364">
(</text>
</g>
<g class="repeat">
<path d=" M 1086 359 h 12 m 52 0 h 12 m -12 0 a 12 12 0 0 1 12 12 v 8 a 12 12 0 0 1 -12 12 m -28 0 h -24 a 12 12 0 0 1 -12 -12 v -8 a 12 12 0 0 1 12 -12"/>
<g class="terminal">
<rect height="22" rx="10" ry="10" width="28" x="1122" y="380"/>
<text x="1136" y="396">
,</text>
</g>
<g class="nonterminal">
<rect height="22" width="52" x="1098" y="348"/>
<text x="1124" y="364">
Fact</text>
</g>
</g>
<g class="terminal">
<rect height="22" rx="10" ry="10" width="28" x="1172" y="348"/>
<text x="1186" y="364">
)</text>
</g>
<path d=" M 1076 359 h 10"/>
<path d=" M 1162 359 h 10"/>
</g>
</g>
<path d=" M 1014 359 h 10"/>
</g>
</g>
<path d=" M 779 359 a 12 12 0 0 1 12 12 v 49 m 453 0 v -49 a 12 12 0 0 1 12 -12"/>
<path d=" M 791 420 v 35 a 12 12 0 0 0 12 12 m 235 0 h 194 m -94 0 l -5 -5 m 0 10 l 5 -5 m 94 0 a 12 12 0 0 0 12 -12 v -35"/>
<g class="labeledbox">
<rect height="66" width="235" x="803" y="420"/>
<path d=" M 803 467 h 8 m 219 0 h 8"/>
<text class="comment" x="847" y="443">
Atom::Var</text>
<g class="sequence">
<text class="comment" x="833" y="472">
regex</text>
<g class="terminal">
<rect height="22" rx="10" ry="10" width="164" x="866" y="456"/>
<text x="948" y="472">
^[A-Z][a-zA-Z_-]*$</text>
</g>
<path d=" M 856 467 h 10"/>
</g>
</g>
</g>
<path d=" M 769 359 h 10"/>
</g>
</g>
</g>
</g>
</g>
<path d=" M 671 118 h 10"/>
</g>
</g>
<g class="terminal">
<rect height="22" rx="10" ry="10" width="28" x="1334" y="107"/>
<text x="1348" y="123">
.</text>
</g>
<path d=" M 601 118 h 10"/>
<path d=" M 1324 118 h 10"/>
</g>
</g>
</g>
<path d=" M 1384 118 h 20 m -10 -10 v 20 m 10 -20 v 20"/>
<path d=" M 48 118 h 10"/>
<path d=" M 78 118 h 10"/>
<path d=" M 1374 118 h 10"/>
</g>
</g>
</svg>
